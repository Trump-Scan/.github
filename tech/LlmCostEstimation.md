# LLM 비용 추정

## 문서 개요

이 문서는 트럼프 스캔 서비스에서 사용할 LLM의 예상 비용을 추정합니다. 분석 레이어에서 모든 수집 데이터를 LLM으로 처리하므로, 비용 추정이 서비스 실행 가능성을 판단하는 핵심 요소입니다.

---

## 1. LLM 사용 시나리오

**처리 범위:**
- 모든 수집 데이터를 LLM으로 분석
- 중복 데이터도 분석 수행 (중복 제거는 분석 후)

**작업 내용:**
1. Semantic Summary 생성 (영어, 100-200 단어)
2. Display Summary 생성 (한국어, 3-5문장)
3. 관련 키워드 식별 (태그 리스트)

**처리량:**
- 일일 수집: 120개 (Truth Social 20 + 백악관 10 + 뉴스 90)
- 중복 여부와 관계없이 120개 모두 분석

---

## 2. 모델 후보

비용 효율성을 최우선으로 고려하여 두 모델을 선정했습니다.

### Gemini 2.0 Flash (추천)

**특징:** Google의 최신 경량 모델, 빠른 응답 속도, 한국어 우수

**가격:**
- 입력: $0.10 / 1M tokens
- 출력: $0.40 / 1M tokens

**장점:** 최고 가성비, 한국어 자연스러움, JSON 출력 안정적

### GPT-4o Mini

**특징:** OpenAI의 경량 모델, 광범위한 사용 사례

**가격:**
- 입력: $0.15 / 1M tokens
- 출력: $0.60 / 1M tokens

**장점:** OpenAI 생태계, 안정적인 출력, JSON mode 지원

**비교:** GPT-4o Mini가 Gemini 대비 50% 비쌈

---

## 3. 토큰 사용량 추정

### 3.1 입력 토큰

**구성:**
- 시스템 프롬프트: 500 tokens
- 원본 데이터 (채널별 가중평균): 1,250 tokens
    - Truth Social: 250 tokens
    - 백악관: 1,000 tokens
    - 뉴스: 1,500 tokens

**건당 평균: 1,750 tokens**

### 3.2 출력 토큰

**생성 내용:**
- Semantic Summary: 200 tokens
- Display Summary: 150 tokens
- Keywords: 50 tokens

**건당 평균: 400 tokens**

---

## 4. 비용 계산

### 4.1 기본 시나리오 (120개/일)

**건당 비용:**

| 모델 | 입력 | 출력 | 총 비용/건 |
|------|------|------|-----------|
| Gemini 2.0 Flash | $0.000175 | $0.000160 | **$0.000335** |
| GPT-4o Mini | $0.000263 | $0.000240 | **$0.000503** |

**기간별 비용:**

| 기간 | Gemini 2.0 Flash | GPT-4o Mini | 차이 |
|------|-----------------|-------------|------|
| 일간 | $0.04 | $0.06 | +50% |
| 월간 | $1.21 | $1.81 | +50% |
| 연간 | $14.67 | $22.04 | +50% |

### 4.2 변동 시나리오

**트래픽 변화 시:**

| 일일 수집량 | Gemini (월간) | GPT-4o Mini (월간) |
|-----------|--------------|-------------------|
| 60개 (절반) | $0.60 | $0.91 |
| 120개 (기본) | $1.21 | $1.81 |
| 240개 (2배) | $2.42 | $3.62 |
| 1,200개 (10배) | $12.10 | $18.12 |

**핵심:** 10배 급증해도 월 $20 미만

---

## 5. 최적화 및 리스크

### 5.1 최적화

다음 최적화 방법들이 있으나, **현재 비용 수준($1.21/월)에서는 모두 불필요:**

- 프롬프트 단축: 10% 절감 → 월 $0.12 절약
- 출력 길이 제한: 15% 절감 → 월 $0.18 절약
- 배치 처리: 25% 절감 → 복잡도 높음
- 2단계 중복 제거: 30%+ 절감 → 구조 변경 필요

**결론:** 개발 시간을 기능 개선에 투자하는 것이 유리

### 5.2 리스크

| 리스크 | 가능성 | 영향 | 대응 |
|--------|--------|------|------|
| 가격 인상 | 낮음 | 낮음 | 다중 모델 지원 |
| 처리량 급증 | 중간 | 낮음 | 알림 + Rate Limiting |
| API 장애 | 낮음 | 중간 | GPT-4o Mini Fallback |

**중복률 변동:** 비용에 영향 없음 (모두 분석하므로)

---

## 6. 결론 및 권장사항

### 추천 모델: Gemini 2.0 Flash

**선택 이유:**
- 최고 가성비 (GPT-4o Mini 대비 50% 저렴)
- 충분한 품질 (한국어 우수, JSON 안정적)
- 빠른 처리 속도
- 낮은 전환 비용 (필요 시 GPT-4o Mini로 전환)

### 예상 비용

**기본 시나리오 (120개/일):**
- 월간: **$1.21**
- 연간: **$14.67**

### 실행 가능성: ✅ 실행 가능

**판단 근거:**
1. 비용이 극히 낮음 (월 커피 한 잔 가격)
2. 확장 가능함 (10배 증가해도 월 $12)
3. 리스크 낮음 (관리 가능한 수준)
4. 최적화 불필요 (현재 비용으로 충분)

### 다음 단계

**즉시:**
- Gemini 2.0 Flash로 MVP 시작
- 비용 모니터링 시스템 구축
- 알림 설정: 일일 $1, 월간 $10 초과 시

**운영 중:**
- 실제 토큰 수 측정
- 응답 품질 평가
- API 안정성 확인

**2주 후:**
- 실측 비용 vs 추정 비교
- 필요 시 모델 전환 검토

**최종 권장:**
- 현재 설계 유지 (분석 → 중복 제거)
- 최적화 보류
- 품질과 기능에 집중
- GPT-4o Mini를 Fallback으로 준비

**결론:** LLM 비용은 MVP 실행의 장애물이 전혀 아닙니다.

---

## 부록: 계산 근거

### 토큰 수 계산

**영어:** 단어 수 × 1.3 ≈ 토큰 수  
**한글:** 글자 수 × 1.5~2.0 ≈ 토큰 수

**실제 측정 도구:**
- OpenAI Tokenizer: https://platform.openai.com/tokenizer

### 가격 출처 (2025년 11월 기준)

- Gemini: https://ai.google.dev/pricing
- OpenAI: https://openai.com/api/pricing/

**참고:** 가격은 변동 가능하므로 최신 정보 확인 필요

---